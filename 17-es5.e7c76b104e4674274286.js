!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{F4UR:function(t,r,a){"use strict";a.r(r),a.d(r,"LoginPageModule",(function(){return P}));var o,i=a("ofXK"),s=a("3Pt+"),c=a("tyNb"),u=a("TEn/"),l=a("mrSG"),p=a("sybk"),b=a("v0iw"),g=a("dkQB"),d=a("fXoL"),h=((o=function(){function t(){e(this,t),this.parseAppId=g.a.parseAppId,this.parseJSKey=g.a.parseJSKey,this.parseServerUrl=g.a.parseServerUrl,this.parseInitialize()}return n(t,[{key:"parseInitialize",value:function(){b.initialize(this.parseAppId,this.parseJSKey),b.serverURL=this.parseServerUrl}},{key:"RecoverPassword",value:function(e){return b.User.requestPasswordReset(e)}}]),t}()).\u0275fac=function(e){return new(e||o)},o.\u0275prov=d.Db({token:o,factory:o.\u0275fac,providedIn:"root"}),o),m=a("2m4Y"),f=a("sYmb");function v(e,t){1&e&&(d.Kb(0,"p",23),d.Kb(1,"ion-text",24),d.kc(2),d.Vb(3,"translate"),d.Jb(),d.Jb()),2&e&&(d.xb(2),d.mc(" ",d.Wb(3,1,"app.label.invalidformat")," "))}var k,x,C=function(){return["/signup"]},w=function(){return["/home"]},O=[{path:"",component:(k=function(){function t(n,r,a,o,i,s,c,u,l){e(this,t),this.authService=n,this.router=r,this.translate=a,this.menuCtrl=o,this.toastCtrl=i,this.alertCtrl=s,this.loadingCtrl=c,this.formBuilder=u,this.forgotPasswordService=l,this.logo="/assets/img/miguitas_logo.png"}return n(t,[{key:"ionViewWillEnter",value:function(){this.menuCtrl.enable(!1)}},{key:"ngOnInit",value:function(){this.authService.SignOut(),this.onLoginForm=this.formBuilder.group({email:[null,s.l.compose([s.l.required])],password:[null,s.l.compose([s.l.required])]})}},{key:"submit",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingCtrl.create();case 2:(t=e.sent).present(),this.authService.Login(this.onLoginForm.value).then((function(e){t.dismiss(),n.goToHome()})).catch((function(e){console.error(e),t.dismiss(),n.alertInvalidCredentials()}));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"alertInvalidCredentials",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertCtrl.create({header:this.translate.get("app.pages.auth.invaliduser"),message:this.translate.get("app.pages.auth.retrycredentials"),buttons:["Ok"]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"openForgotPassAlert",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertCtrl.create({header:this.translate.get("app.pages.auth.recoverpassword"),message:this.translate.get("app.pages.auth.recoverpassword.message"),inputs:[{name:"email",type:"email",placeholder:this.translate.get("app.label.email")}],buttons:[{text:this.translate.get("app.label.cancel"),role:"cancel",cssClass:"secondary"},{text:this.translate.get("app.label.accept"),handler:function(e){return Object(l.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.forgotPass(e);case 1:case"end":return t.stop()}}),t,this)})))}}]});case 2:e.sent.present();case 3:case"end":return e.stop()}}),e,this)})))}},{key:"forgotPass",value:function(e){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.validateEmail(e.email)){t.next=7;break}return t.next=3,this.toastCtrl.create({message:this.translate.get("app.label.invalidemailformat"),duration:4e3,position:"bottom",buttons:[{icon:"close",side:"end"}],color:"danger"});case 3:return n=t.sent,t.next=6,n.present();case 6:return t.abrupt("return",void t.sent);case 7:return t.next=9,this.loadingCtrl.create();case 9:(r=t.sent).present(),this.forgotPasswordService.RecoverPassword(e.email.trim().toLowerCase()).then((function(t){return Object(l.a)(a,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.dismiss(),t.next=3,this.alertCtrl.create({header:this.translate.get("app.pages.auth.recoverpassword.success.header")+e.email,message:this.translate.get("app.pages.auth.recoverpassword.success.message"),buttons:["Ok"]});case 3:return n=t.sent,t.next=6,n.present();case 6:case"end":return t.stop()}}),t,this)})))})).catch((function(t){return Object(l.a)(a,void 0,void 0,regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.dismiss(),n.next=3,this.alertCtrl.create({header:this.translate.get("app.label.error"),message:this.translate.get("app.pages.auth.recoverpassword.error.message")+e.email,buttons:["Ok"]});case 3:return a=n.sent,n.next=6,a.present();case 6:console.error(t);case 7:case"end":return n.stop()}}),n,this)})))}));case 11:case"end":return t.stop()}}),t,this)})))}},{key:"validateEmail",value:function(e){return/\S+@\S+\.\S+/.test(e)}},{key:"goToHome",value:function(){this.router.navigate(["/home"])}}]),t}(),k.\u0275fac=function(e){return new(e||k)(d.Hb(p.a),d.Hb(c.f),d.Hb(m.a),d.Hb(u.V),d.Hb(u.bb),d.Hb(u.a),d.Hb(u.U),d.Hb(s.a),d.Hb(h))},k.\u0275cmp=d.Bb({type:k,selectors:[["app-login"]],decls:41,vars:26,consts:[[1,"login","auth-page","ion-padding"],[1,"auth-content"],[1,"logo",3,"src"],[1,"animate__animated","animate__fadeInUp","animate__fast"],["color","light ion-padding"],[1,"list-form",3,"formGroup","keyup.enter"],[1,"ion-no-padding"],["position","floating"],["name","mail"],["type","email","color","hotpink","formControlName","email"],["class","text08",4,"ngIf"],["name","lock-closed"],["type","password","color","hotpink","formControlName","password"],["color","success","size","medium","expand","full","shape","round","tappable","",1,"ion-margin",3,"disabled","click"],["name","log-in","slot","end"],["color","secondary","size","medium","expand","full","shape","round",1,"ion-margin",3,"routerLink"],[1,"row"],[1,"col","ion-padding"],[3,"routerLink"],["color","dark"],["name","arrow-back","slot","start"],[1,"col","text-align-right","ion-padding"],[3,"click"],[1,"text08"],["color","danger"]],template:function(e,t){1&e&&(d.Kb(0,"ion-content",0),d.Kb(1,"div",1),d.Kb(2,"div"),d.Ib(3,"ion-img",2),d.Jb(),d.Kb(4,"div",3),d.Kb(5,"ion-card",4),d.Kb(6,"form",5),d.Sb("keyup.enter",(function(){return!!t.onLoginForm.valid&&t.submit()})),d.Kb(7,"ion-item",6),d.Kb(8,"ion-label",7),d.Ib(9,"ion-icon",8),d.kc(10),d.Vb(11,"translate"),d.Jb(),d.Ib(12,"ion-input",9),d.Jb(),d.jc(13,v,4,3,"p",10),d.Kb(14,"ion-item",6),d.Kb(15,"ion-label",7),d.Ib(16,"ion-icon",11),d.kc(17),d.Vb(18,"translate"),d.Jb(),d.Ib(19,"ion-input",12),d.Jb(),d.Jb(),d.Kb(20,"ion-button",13),d.Sb("click",(function(){return t.submit()})),d.Ib(21,"ion-icon",14),d.kc(22),d.Vb(23,"translate"),d.Jb(),d.Kb(24,"ion-button",15),d.kc(25),d.Vb(26,"translate"),d.Jb(),d.Kb(27,"div",16),d.Kb(28,"div",17),d.Kb(29,"ion-text",18),d.Kb(30,"ion-text",19),d.Kb(31,"strong"),d.Ib(32,"ion-icon",20),d.kc(33),d.Vb(34,"translate"),d.Jb(),d.Jb(),d.Jb(),d.Jb(),d.Kb(35,"div",21),d.Kb(36,"ion-text",22),d.Sb("click",(function(){return t.openForgotPassAlert()})),d.Kb(37,"ion-text",19),d.Kb(38,"strong"),d.kc(39),d.Vb(40,"translate"),d.Jb(),d.Jb(),d.Jb(),d.Jb(),d.Jb(),d.Jb(),d.Jb(),d.Jb(),d.Jb()),2&e&&(d.xb(3),d.ac("src",t.logo),d.xb(3),d.ac("formGroup",t.onLoginForm),d.xb(4),d.mc(" \xa0",d.Wb(11,12,"app.label.email")," "),d.xb(3),d.ac("ngIf",t.onLoginForm.get("email").touched&&t.onLoginForm.get("email").hasError("required")),d.xb(4),d.mc(" \xa0",d.Wb(18,14,"app.label.password")," "),d.xb(3),d.ac("disabled",!t.onLoginForm.valid),d.xb(2),d.mc(" ",d.Wb(23,16,"app.pages.auth.login")," "),d.xb(2),d.ac("routerLink",d.cc(24,C)),d.xb(1),d.mc(" ",d.Wb(26,18,"app.pages.auth.createaccount")," "),d.xb(4),d.ac("routerLink",d.cc(25,w)),d.xb(4),d.mc(" ",d.Wb(34,20,"app.label.goback")," "),d.xb(6),d.mc(" ",d.Wb(40,22,"app.pages.auth.forgotpassword")," "))},directives:[u.o,u.t,u.i,s.m,s.i,s.c,u.x,u.y,u.s,u.w,u.ab,s.h,s.b,i.j,u.g,u.Y,c.g,u.O],pipes:[f.c],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--background:linear-gradient(135deg,var(--ion-color-medium),var(--ion-color-light))}.auth-page[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%], .auth-page[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding:0}.auth-page[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .button-ios[_ngcontent-%COMP%], .auth-page[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .button-md[_ngcontent-%COMP%]{border-radius:0}.auth-page[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .button-ios[_ngcontent-%COMP%]:first-of-type, .auth-page[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .button-md[_ngcontent-%COMP%]:first-of-type{border-radius:2px 0 0 2px}.auth-page[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .button-ios[_ngcontent-%COMP%]:last-of-type, .auth-page[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .button-md[_ngcontent-%COMP%]:last-of-type{border-radius:0 2px 2px 0}.auth-page[_ngcontent-%COMP%]   .auth-content[_ngcontent-%COMP%]{margin:auto;max-width:720px}.auth-page[_ngcontent-%COMP%]   .auth-content[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:180px;margin:auto;display:block}"]}),k)}],P=((x=function t(){e(this,t)}).\u0275mod=d.Fb({type:x}),x.\u0275inj=d.Eb({factory:function(e){return new(e||x)},imports:[[i.b,s.d,s.k,u.S,c.h.forChild(O),f.b.forChild()]]}),x)}}])}();