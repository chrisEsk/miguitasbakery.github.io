!function(){function n(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function t(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function e(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{KiVI:function(t,i,r){"use strict";r.r(i),r.d(i,"BrandListPageModule",(function(){return _}));var a,o=r("ofXK"),c=r("3Pt+"),s=r("tyNb"),u=r("TEn/"),l=r("mrSG"),b=r("VVxe"),d=r("LvDl"),h=r("R0Ic"),g=r("PLH8"),f=r("dkQB"),p=r("sybk"),m=r("v0iw"),v=r("fXoL"),x=((a=function(){function t(){n(this,t),this.parseAppId=f.a.parseAppId,this.parseJSKey=f.a.parseJSKey,this.parseServerUrl=f.a.parseServerUrl,this.parseInitialize()}return e(t,[{key:"parseInitialize",value:function(){m.initialize(this.parseAppId,this.parseJSKey),m.serverURL=this.parseServerUrl}},{key:"GetBrands",value:function(n,t,e){return m.Cloud.run("app_GetBrands")}},{key:"GetTagsForBrand",value:function(n){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=m.Object.extend("BrandTags"),(i=new m.Query(e)).equalTo("brand",n),i.include("tag"),i.ascending("order"),t.next=6,i.find();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))}}]),t}()).\u0275fac=function(n){return new(n||a)},a.\u0275prov=v.Db({token:a,factory:a.\u0275fac,providedIn:"root"}),a),k=r("sYmb"),y=r("otYU");function w(n,t){1&n&&v.Ib(0,"ion-spinner",4)}function O(n,t){1&n&&v.Ib(0,"ion-icon",15)}var I=function(n){return{background:n}},P=function(n){return{color:n}};function S(n,t){if(1&n&&(v.Kb(0,"span"),v.Kb(1,"ion-badge",13),v.jc(2,O,1,0,"ion-icon",14),v.Kb(3,"ion-text",13),v.kc(4),v.Jb(),v.Jb(),v.Jb()),2&n){var e=t.$implicit;v.xb(1),v.ac("ngStyle",v.dc(4,I,e.get("isHighlight")?"var(--ion-color-warning)":"")),v.xb(1),v.ac("ngIf",e.get("isHighlight")),v.xb(1),v.ac("ngStyle",v.dc(6,P,e.get("isHighlight")?"var(--hotpink)":"")),v.xb(1),v.mc(" ",e.get("tag").get("name_es")," ")}}function j(n,t){if(1&n&&(v.Kb(0,"div"),v.jc(1,S,5,8,"span",12),v.Jb()),2&n){var e=v.Ub().$implicit;v.xb(1),v.ac("ngForOf",e.tags)}}function K(n,t){if(1&n){var e=v.Lb();v.Kb(0,"ion-card",5),v.Sb("click",(function(){v.fc(e);var n=t.$implicit;return v.Ub().goToProductList(n)})),v.Kb(1,"ion-card-header"),v.Kb(2,"ion-card-title",6),v.kc(3),v.Jb(),v.Kb(4,"ion-card-subtitle"),v.kc(5),v.Jb(),v.Jb(),v.Ib(6,"img",7),v.Vb(7,"cloudinaryPipe"),v.Kb(8,"ion-card-content"),v.jc(9,j,2,1,"div",8),v.Kb(10,"ion-button",9),v.Ib(11,"ion-icon",10),v.Kb(12,"ion-text",11),v.kc(13),v.Vb(14,"translate"),v.Jb(),v.Jb(),v.Jb(),v.Jb()}if(2&n){var i=t.$implicit;v.xb(3),v.mc(" ",i.get("name")," "),v.xb(2),v.mc(" ",i.get("description_es")," "),v.xb(1),v.bc("src",v.Xb(7,5,i.get("imgUrl"),"w720"),v.hc),v.xb(3),v.ac("ngIf",(null==i.tags?null:i.tags.length)>0),v.xb(4),v.mc(" ",v.Wb(14,8,"app.label.enter")," ")}}var J,C,R=((J=function(){function t(e,i,r,a,o,c){n(this,t),this.router=e,this.keyboard=i,this.brandService=r,this.loadingCtrl=a,this.alertCtrl=o,this.authService=c,this.searchCriteria="",this.daList=[],this.ionRefresher=!1}return e(t,[{key:"ngOnInit",value:function(){this.resetPagination(),this.search()}},{key:"doRefresh",value:function(n){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.ionRefresher=!0,t.next=3,this.ngOnInit();case 3:n.target.complete(),this.ionRefresher=!1;case 5:case"end":return t.stop()}}),t,this)})))}},{key:"resetPagination",value:function(){this.useInfiniteScroll=!1,this.fetchingPage=!1,this.page=0,this.lastPage=!1}},{key:"search",value:function(){var n=this;return new Promise((function(t,e){return Object(l.a)(n,void 0,void 0,regeneratorRuntime.mark((function n(){var i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.loading=!this.useInfiniteScroll&&!this.ionRefresher,this.noResults=!1,this.brandService.GetBrands(this.page,f.a.SETTINGS.PAGE_SIZE,b(this.searchCriteria)).then((function(n){i.useInfiniteScroll?Object(d.each)(n,(function(n){return Object(l.a)(i,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.daList.push(n),t.next=3,this.brandService.GetTagsForBrand(n);case 3:n.tags=t.sent;case 4:case"end":return t.stop()}}),t,this)})))})):(i.daList=n,Object(d.each)(i.daList,(function(n){return Object(l.a)(i,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.brandService.GetTagsForBrand(n);case 2:n.tags=t.sent;case 3:case"end":return t.stop()}}),t,this)})))}))),i.loading=!1,i.noResults=Object(d.isEmpty)(i.daList),t(n)})).catch((function(n){console.error(n),i.loading=!1,i.noResults=!0,i.daList=[],e(n)}));case 1:case"end":return n.stop()}}),n,this)})))}))}},{key:"loadMore",value:function(){var n=this;this.fetchingPage||(this.useInfiniteScroll=!0,this.fetchingPage=!0,this.page++,this.search().then((function(t){n.useInfiniteScroll=!1,n.fetchingPage=!1,n.infiniteScroll.complete(),t?n.lastPage=0===t.length:n.page--})).catch((function(t){console.error(t),n.infiniteScroll.complete()})))}},{key:"criteriaChanged",value:function(){this.resetPagination(),this.search()}},{key:"clearSearchBar",value:function(){this.searchCriteria="",this.hideKeyboard(),this.scrollToTop(),this.resetPagination(),this.search()}},{key:"hideKeyboard",value:function(){this.keyboard.hide()}},{key:"scrollToTop",value:function(){this.content.scrollToTop(1500)}},{key:"goToProductList",value:function(n){var t=n.get("urlId");this.router.navigate(["/product-list/"+t])}}]),t}()).\u0275fac=function(n){return new(n||J)(v.Hb(s.f),v.Hb(g.a),v.Hb(x),v.Hb(u.U),v.Hb(u.a),v.Hb(p.a))},J.\u0275cmp=v.Bb({type:J,selectors:[["app-brand-list"]],viewQuery:function(n,t){var e;1&n&&(v.oc(u.o,!0),v.oc(u.u,!0)),2&n&&(v.ec(e=v.Tb())&&(t.content=e.first),v.ec(e=v.Tb())&&(t.infiniteScroll=e.first))},features:[v.wb([g.a])],decls:13,vars:6,consts:[["color","primary"],["slot","start"],["class","center3 mt-4","name","crescent",4,"ngIf"],["tappable","",3,"click",4,"ngFor","ngForOf"],["name","crescent",1,"center3","mt-4"],["tappable","",3,"click"],[1,"hvr-grow","ion-margin-bottom"],[1,"cardImg",3,"src"],[4,"ngIf"],["size","medium","expand","full","shape","round","color","secondary"],["slot","start","name","arrow-forward","color","hotpink"],["color","light",1,"cardBtn"],[4,"ngFor","ngForOf"],[3,"ngStyle"],["name","star","color","hotpink",4,"ngIf"],["name","star","color","hotpink"]],template:function(n,t){1&n&&(v.Kb(0,"ion-header"),v.Kb(1,"ion-toolbar",0),v.Kb(2,"ion-buttons",1),v.Ib(3,"ion-menu-button"),v.Jb(),v.Kb(4,"ion-title"),v.kc(5),v.Vb(6,"translate"),v.Jb(),v.Jb(),v.Jb(),v.Kb(7,"ion-content"),v.Kb(8,"div"),v.Kb(9,"main"),v.jc(10,w,1,0,"ion-spinner",2),v.Kb(11,"section"),v.jc(12,K,15,10,"ion-card",3),v.Jb(),v.Jb(),v.Jb(),v.Jb()),2&n&&(v.xb(5),v.mc(" ",v.Wb(6,4,"app.label.brands")," "),v.xb(3),v.ac("@staggerIn",null==t.daList?null:t.daList.length),v.xb(2),v.ac("ngIf",t.loading),v.xb(2),v.ac("ngForOf",t.daList))},directives:[u.r,u.R,u.h,u.B,u.Q,u.o,o.j,o.i,u.M,u.i,u.k,u.m,u.l,u.j,u.g,u.s,u.O,u.f,o.k],pipes:[k.c,y.a],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--background:linear-gradient(135deg,var(--ion-color-light),var(--ion-color-secondary))}@media (min-width:620px){main[_ngcontent-%COMP%]{-moz-column-count:1;column-count:1;-moz-column-gap:20px;column-gap:20px}section[_ngcontent-%COMP%]{-moz-column-break-inside:avoid;break-inside:avoid}}@media (min-width:960px){main[_ngcontent-%COMP%]{-moz-column-count:2;column-count:2}}ion-badge[_ngcontent-%COMP%]{margin:3px}main[_ngcontent-%COMP%]{margin:0 auto;padding:20px}ion-card[_ngcontent-%COMP%]{--background:linear-gradient(135deg,var(--cream-shade),var(--cream));max-width:720px}.cardImg[_ngcontent-%COMP%]{max-height:480px;max-width:720px}ion-card-title[_ngcontent-%COMP%]{font-weight:900;color:var(--ion-color-light);text-shadow:.5px .5px .5px var(--ion-color-dark);text-decoration:underline;font-size:27px}section[_ngcontent-%COMP%]{margin-bottom:20px;overflow:hidden}"],data:{animation:[Object(h.k)("staggerIn",[Object(h.j)("* => *",[Object(h.f)(":enter",Object(h.i)({opacity:0,transform:"translate3d(0,10px,0)"}),{optional:!0}),Object(h.f)(":enter",Object(h.h)("300ms",[Object(h.e)("600ms",Object(h.i)({opacity:1,transform:"translate3d(0,0,0)"}))]),{optional:!0})])])]}}),J),T=r("7JYj"),L=[{path:"",component:R}],_=((C=function t(){n(this,t)}).\u0275mod=v.Fb({type:C}),C.\u0275inj=v.Eb({factory:function(n){return new(n||C)},imports:[[o.b,c.d,u.S,s.h.forChild(L),T.a,k.b.forChild()]]}),C)}}])}();