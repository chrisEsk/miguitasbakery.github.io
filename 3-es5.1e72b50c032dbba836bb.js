!function(){function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{NPEJ:function(e,i,r){"use strict";r.r(i),r.d(i,"ProductListPageModule",(function(){return T}));var o=r("ofXK"),a=r("3Pt+"),c=r("tyNb"),s=r("TEn/"),l=r("mrSG"),b=r("VVxe"),d=r("LvDl"),u=r("PLH8"),g=r("dkQB"),h=r("sybk"),f=r("7K7q"),p=r("fXoL"),m=r("sYmb"),v=r("otYU");function x(t,n){1&t&&(p.Kb(0,"ion-card",13),p.Kb(1,"ion-card-content",14),p.Ib(2,"p",15),p.Vb(3,"translate"),p.Jb(),p.Jb()),2&t&&(p.xb(2),p.ac("innerHTML",p.Wb(3,1,"app.pages.product.html.daysnotice"),p.gc))}function C(t,n){1&t&&p.Ib(0,"ion-spinner",16)}function P(t,n){if(1&t&&(p.Kb(0,"span"),p.Kb(1,"ion-badge",23),p.kc(2),p.Jb(),p.Kb(3,"ion-badge",24),p.Ib(4,"ion-icon",25),p.kc(5),p.Jb(),p.Jb()),2&t){var e=n.$implicit;p.xb(2),p.mc(" ",e.get("tag").get("name_es")," "),p.xb(3),p.mc(" ",e.get("tag").get("name_es")," ")}}function k(t,n){if(1&t&&(p.Kb(0,"div"),p.jc(1,P,6,2,"span",7),p.Jb()),2&t){var e=p.Ub().$implicit;p.xb(1),p.ac("ngForOf",e.tags)}}function M(t,n){if(1&t){var e=p.Lb();p.Kb(0,"article"),p.Kb(1,"ion-card",17),p.Sb("click",(function(){p.fc(e);var t=n.$implicit;return p.Ub().goToProduct(t)})),p.Ib(2,"ion-img",18),p.Vb(3,"cloudinaryPipe"),p.Kb(4,"ion-card-title",19),p.kc(5),p.Jb(),p.Kb(6,"ion-card-subtitle",19),p.kc(7),p.Jb(),p.Ib(8,"div",20),p.Kb(9,"ion-card-content"),p.jc(10,k,2,1,"div",21),p.Kb(11,"ion-badge",22),p.Kb(12,"h3"),p.Kb(13,"strong"),p.kc(14),p.Vb(15,"number"),p.Jb(),p.Jb(),p.Jb(),p.Jb(),p.Jb(),p.Jb()}if(2&t){var i=n.$implicit,r=p.Ub();p.xb(2),p.ac("src",p.Xb(3,5,i.get("imgUrls")[0],"rectangleFill")),p.xb(3),p.mc(" ",i.get("name_es")," "),p.xb(2),p.mc(" ",i.get("presentation_es")," "),p.xb(3),p.ac("ngIf",r.loadTags&&(null==i.tags?null:i.tags.length)>0),p.xb(4),p.mc("\u20a1 ",p.Wb(15,8,i.get("price_cr")),"")}}function O(t,n){if(1&t){var e=p.Lb();p.Kb(0,"ion-button",26),p.Sb("click",(function(){return p.fc(e),p.Ub().loadMore()})),p.kc(1),p.Vb(2,"translate"),p.Jb()}2&t&&(p.xb(1),p.mc(" ",p.Wb(2,1,"app.label.loadmore")," "))}function _(t,n){if(1&t){var e=p.Lb();p.Kb(0,"div",27),p.Kb(1,"ion-button",28),p.Sb("click",(function(){return p.fc(e),p.Ub().scrollToTop()})),p.Ib(2,"ion-icon",29),p.Jb(),p.Jb()}}var I=function(){return["/cart-list"]};function w(t,n){1&t&&(p.Kb(0,"ion-fab",30),p.Kb(1,"ion-fab-button",31),p.Ib(2,"ion-icon",32),p.Jb(),p.Jb()),2&t&&(p.xb(1),p.ac("routerLink",p.cc(1,I)))}function y(t,n){if(1&t){var e=p.Lb();p.Kb(0,"ion-infinite-scroll",33),p.Sb("ionInfinite",(function(){return p.fc(e),p.Ub().loadMore()})),p.Ib(1,"ion-infinite-scroll-content",34),p.Jb()}}var J,K,L=((J=function(){function e(n,i,r,o,a,c,s){t(this,e),this.route=n,this.router=i,this.keyboard=r,this.productService=o,this.loadingCtrl=a,this.alertCtrl=c,this.authService=s,this.brandUrlId=this.route.snapshot.paramMap.get("brandUrlId")||"all",this.loadTags=!1,this.searchCriteria="",this.daList=[],this.ionRefresher=!1}var i,r,o;return i=e,(r=[{key:"ngOnInit",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.authService.cast.subscribe((function(t){n.currentUser=t})),this.resetPagination(),this.search();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"doRefresh",value:function(t){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.ionRefresher=!0,n.next=3,this.ngOnInit();case 3:t.target.complete(),this.ionRefresher=!1;case 5:case"end":return n.stop()}}),n,this)})))}},{key:"resetPagination",value:function(){this.useInfiniteScroll=!1,this.fetchingPage=!1,this.page=0,this.lastPage=!1}},{key:"search",value:function(){var t=this;return new Promise((function(n,e){return Object(l.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.loading=!this.useInfiniteScroll&&!this.ionRefresher;try{this.searchCriteria=b(this.searchCriteria)}catch(r){}this.productService.GetBrandProductsBySearchCriteria(this.brandUrlId,this.page,g.a.SETTINGS.PAGE_SIZE,this.searchCriteria).then((function(t){i.useInfiniteScroll?Object(d.each)(t,(function(t){return Object(l.a)(i,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.daList.push(t),n.t0=this.loadTags,!n.t0){n.next=6;break}return n.next=5,this.productService.GetTagsForProduct(t.id);case 5:t.tags=n.sent;case 6:case"end":return n.stop()}}),n,this)})))})):(i.daList=t,i.loadTags&&Object(d.each)(i.daList,(function(t){return Object(l.a)(i,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.productService.GetTagsForProduct(t.id);case 2:t.tags=n.sent;case 3:case"end":return n.stop()}}),n,this)})))}))),i.loading=!1,n(t)})).catch((function(t){console.error(t),i.loading=!1,i.daList=[],e(t)}));case 3:case"end":return t.stop()}}),t,this)})))}))}},{key:"loadMore",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.fetchingPage||(this.useInfiniteScroll=!0,this.fetchingPage=!0,this.page++,this.search().then((function(t){n.useInfiniteScroll=!1,n.fetchingPage=!1,n.infiniteScroll.complete(),t&&(n.lastPage=0===t.length),console.log("loaded page ",n.page)})).catch((function(t){console.error(t),n.infiniteScroll.complete()})));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"goToProduct",value:function(t){this.router.navigate(["/product/"+t.get("urlId")])}},{key:"criteriaChanged",value:function(){this.resetPagination(),this.search()}},{key:"clearSearchBar",value:function(){this.searchCriteria="",this.hideKeyboard(),this.scrollToTop(),this.resetPagination(),this.search()}},{key:"hideKeyboard",value:function(){this.keyboard.hide()}},{key:"scrollToTop",value:function(){this.content.scrollToTop(1e3)}}])&&n(i.prototype,r),o&&n(i,o),e}()).\u0275fac=function(t){return new(t||J)(p.Hb(c.a),p.Hb(c.f),p.Hb(u.a),p.Hb(f.a),p.Hb(s.U),p.Hb(s.a),p.Hb(h.a))},J.\u0275cmp=p.Bb({type:J,selectors:[["app-product-list"]],viewQuery:function(t,n){var e;1&t&&(p.oc(s.o,!0),p.oc(s.u,!0)),2&t&&(p.ec(e=p.Tb())&&(n.content=e.first),p.ec(e=p.Tb())&&(n.infiniteScroll=e.first))},features:[p.wb([u.a])],decls:21,vars:15,consts:[["color","primary"],["slot","start"],["inputmode","text","searchIcon","search-outline",1,"ion-no-margin",3,"placeholder","debounce","ngModel","ionChange","ngModelChange"],["slot","fixed","pullFactor","0.8","pullMin","60","pullMax","120",3,"ionRefresh"],["class","animate__animated animate__fadeIn","color","cream",4,"ngIf"],["class","center3 mt-4","name","crescent",4,"ngIf"],[1,"cards"],[4,"ngFor","ngForOf"],[1,"loadMoreBtn","ion-margin","text-center"],["shape","round","color","secondary",3,"click",4,"ngIf"],["class","ion-margin text-center",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed",4,"ngIf"],["threshold","100px",3,"ionInfinite",4,"ngIf"],["color","cream",1,"animate__animated","animate__fadeIn"],[1,"text-center"],[3,"innerHTML"],["name","crescent",1,"center3","mt-4"],["tappable","",1,"daListCard","hvr-grow",3,"click"],[3,"src"],["color","light"],[1,"boxshadow"],[4,"ngIf"],["slot","end","color","success",1,"price"],["color","tertiary",1,"ion-margin"],["slot","start","color","dark",1,"rooms"],["name","book","color","secondary"],["shape","round","color","secondary",3,"click"],[1,"ion-margin","text-center"],["color","light",3,"click"],["name","arrow-up-outline"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"routerLink"],["name","cart"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","crescent"]],template:function(t,n){1&t&&(p.Kb(0,"ion-header"),p.Kb(1,"ion-toolbar",0),p.Kb(2,"ion-buttons",1),p.Ib(3,"ion-menu-button"),p.Jb(),p.Kb(4,"ion-title"),p.kc(5),p.Vb(6,"translate"),p.Jb(),p.Jb(),p.Jb(),p.Kb(7,"ion-content"),p.Kb(8,"ion-searchbar",2),p.Sb("ionChange",(function(){return n.criteriaChanged()}))("ngModelChange",(function(t){return n.searchCriteria=t})),p.Vb(9,"translate"),p.Jb(),p.Kb(10,"ion-refresher",3),p.Sb("ionRefresh",(function(t){return n.doRefresh(t)})),p.Ib(11,"ion-refresher-content"),p.Jb(),p.jc(12,x,4,3,"ion-card",4),p.jc(13,C,1,0,"ion-spinner",5),p.Kb(14,"section",6),p.jc(15,M,16,10,"article",7),p.Jb(),p.Kb(16,"div",8),p.jc(17,O,3,3,"ion-button",9),p.Jb(),p.jc(18,_,3,0,"div",10),p.jc(19,w,3,2,"ion-fab",11),p.jc(20,y,2,0,"ion-infinite-scroll",12),p.Jb()),2&t&&(p.xb(5),p.lc(p.Wb(6,11,"app.pages.product.menu")),p.xb(3),p.bc("placeholder",p.Wb(9,13,"app.button.search")),p.ac("debounce",500)("ngModel",n.searchCriteria),p.xb(4),p.ac("ngIf",0===n.searchCriteria.length),p.xb(1),p.ac("ngIf",n.loading),p.xb(2),p.ac("ngForOf",n.daList),p.xb(2),p.ac("ngIf",!n.lastPage&&0===n.searchCriteria.length),p.xb(1),p.ac("ngIf",0===n.searchCriteria.length),p.xb(1),p.ac("ngIf",n.currentUser),p.xb(1),p.ac("ngIf",!n.lastPage))},directives:[s.r,s.R,s.h,s.B,s.Q,s.o,s.H,s.ab,a.h,a.j,s.E,s.F,o.j,o.i,s.i,s.j,s.M,s.t,s.m,s.l,s.f,s.s,s.g,s.p,s.q,s.Y,c.g,s.u,s.v],pipes:[m.c,v.a,o.d],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--background:linear-gradient(135deg,var(--ion-color-light),var(--cream))}ion-card.daListCard[_ngcontent-%COMP%]{position:relative}ion-card.daListCard[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{margin-bottom:-3px}ion-card.daListCard[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:30px;top:5%;font-weight:bolder}ion-card.daListCard[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%], ion-card.daListCard[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{position:absolute;left:5%;z-index:2;text-shadow:.5px .5px .5px var(--ion-color-dark)}ion-card.daListCard[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{bottom:5%;font-size:20px}ion-card.daListCard[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{width:100%;position:absolute;z-index:3;bottom:0}ion-card.daListCard[_ngcontent-%COMP%]   .boxshadow[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0;z-index:1;box-shadow:inset 0 0 15rem rgba(var(--ion-color-dark-rgb),.33)}ion-card.daListCard[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{right:2%;bottom:20%;position:absolute}ion-card.daListCard[_ngcontent-%COMP%]   .rooms[_ngcontent-%COMP%]{left:0;position:absolute;bottom:0}ion-card.daListCard[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{margin:3px}.cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));grid-gap:1rem;max-width:960px;margin:10px auto 30px}article[_ngcontent-%COMP%]{position:relative}.article-img[_ngcontent-%COMP%]{height:200px;width:100%;-o-object-fit:cover;object-fit:cover}.article-title[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;padding:10px;background-color:hsla(0,0%,100%,.7)}.darkBg[_ngcontent-%COMP%]{background-color:rgba(54,27,18,.5)}.viewMoreBtn[_ngcontent-%COMP%]{max-width:200px}.loadMoreBtn[_ngcontent-%COMP%]{display:none}@media screen and (min-width:1319px){.loadMoreBtn[_ngcontent-%COMP%]{display:block}}"]}),J),S=r("7JYj"),j=[{path:"",component:L}],T=((K=function n(){t(this,n)}).\u0275mod=p.Fb({type:K}),K.\u0275inj=p.Eb({factory:function(t){return new(t||K)},imports:[[o.b,a.d,s.S,m.b.forChild(),c.h.forChild(j),S.a]]}),K)}}])}();