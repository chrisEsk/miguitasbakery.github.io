(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{F4UR:function(t,e,n){"use strict";n.r(e),n.d(e,"LoginPageModule",(function(){return C}));var o=n("ofXK"),a=n("3Pt+"),i=n("tyNb"),r=n("TEn/"),s=n("mrSG"),c=n("sybk"),l=n("v0iw"),p=n("dkQB"),b=n("fXoL");let g=(()=>{class t{constructor(){this.parseAppId=p.a.parseAppId,this.parseJSKey=p.a.parseJSKey,this.parseServerUrl=p.a.parseServerUrl,this.parseInitialize()}parseInitialize(){l.initialize(this.parseAppId,this.parseJSKey),l.serverURL=this.parseServerUrl}RecoverPassword(t){return l.User.requestPasswordReset(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var d=n("2m4Y"),u=n("sYmb");function h(t,e){1&t&&(b.Kb(0,"p",23),b.Kb(1,"ion-text",24),b.kc(2),b.Vb(3,"translate"),b.Jb(),b.Jb()),2&t&&(b.xb(2),b.mc(" ",b.Wb(3,1,"app.label.invalidformat")," "))}const m=function(){return["/signup"]},f=function(){return["/home"]},v=[{path:"",component:(()=>{class t{constructor(t,e,n,o,a,i,r,s,c){this.authService=t,this.router=e,this.translate=n,this.menuCtrl=o,this.toastCtrl=a,this.alertCtrl=i,this.loadingCtrl=r,this.formBuilder=s,this.forgotPasswordService=c,this.logo="/assets/img/miguitas_logo.png"}ionViewWillEnter(){this.menuCtrl.enable(!1)}ionViewDidLeave(){this.menuCtrl.enable(!0)}ngOnInit(){this.authService.SignOut(),this.onLoginForm=this.formBuilder.group({email:[null,a.l.compose([a.l.required])],password:[null,a.l.compose([a.l.required])]})}submit(){return Object(s.a)(this,void 0,void 0,(function*(){const t=yield this.loadingCtrl.create();t.present(),this.authService.Login(this.onLoginForm.value).then(e=>{t.dismiss(),this.goToHome()}).catch(e=>{console.error(e),t.dismiss(),this.alertInvalidCredentials()})}))}alertInvalidCredentials(){return Object(s.a)(this,void 0,void 0,(function*(){const t=yield this.alertCtrl.create({header:this.translate.get("app.pages.auth.invaliduser"),message:this.translate.get("app.pages.auth.retrycredentials"),buttons:["Ok"]});yield t.present()}))}openForgotPassAlert(){return Object(s.a)(this,void 0,void 0,(function*(){(yield this.alertCtrl.create({header:this.translate.get("app.pages.auth.recoverpassword"),message:this.translate.get("app.pages.auth.recoverpassword.message"),inputs:[{name:"email",type:"email",placeholder:this.translate.get("app.label.email")}],buttons:[{text:this.translate.get("app.label.cancel"),role:"cancel",cssClass:"secondary"},{text:this.translate.get("app.label.accept"),handler:t=>Object(s.a)(this,void 0,void 0,(function*(){this.forgotPass(t)}))}]})).present()}))}forgotPass(t){return Object(s.a)(this,void 0,void 0,(function*(){if(!this.validateEmail(t.email)){const t=yield this.toastCtrl.create({message:this.translate.get("app.label.invalidemailformat"),duration:4e3,position:"bottom",buttons:[{icon:"close",side:"end"}],color:"danger"});return void(yield t.present())}const e=yield this.loadingCtrl.create();e.present(),this.forgotPasswordService.RecoverPassword(t.email.trim().toLowerCase()).then(n=>Object(s.a)(this,void 0,void 0,(function*(){e.dismiss();const n=yield this.alertCtrl.create({header:this.translate.get("app.pages.auth.recoverpassword.success.header")+t.email,message:this.translate.get("app.pages.auth.recoverpassword.success.message"),buttons:["Ok"]});yield n.present()}))).catch(n=>Object(s.a)(this,void 0,void 0,(function*(){e.dismiss();const o=yield this.alertCtrl.create({header:this.translate.get("app.label.error"),message:this.translate.get("app.pages.auth.recoverpassword.error.message")+t.email,buttons:["Ok"]});yield o.present(),console.error(n)})))}))}validateEmail(t){return/\S+@\S+\.\S+/.test(t)}goToHome(){this.router.navigate(["/home"])}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(c.a),b.Hb(i.f),b.Hb(d.a),b.Hb(r.V),b.Hb(r.bb),b.Hb(r.a),b.Hb(r.U),b.Hb(a.a),b.Hb(g))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-login"]],decls:41,vars:26,consts:[[1,"login","auth-page","ion-padding"],[1,"auth-content"],[1,"logo",3,"src"],[1,"animate__animated","animate__fadeInUp","animate__fast"],["color","light ion-padding"],[1,"list-form",3,"formGroup","keyup.enter"],[1,"ion-no-padding"],["position","floating"],["name","mail"],["type","email","color","hotpink","formControlName","email"],["class","text08",4,"ngIf"],["name","lock-closed"],["type","password","color","hotpink","formControlName","password"],["color","success","size","medium","expand","full","shape","round","tappable","",1,"ion-margin",3,"disabled","click"],["name","log-in","slot","end"],["color","secondary","size","medium","expand","full","shape","round",1,"ion-margin",3,"routerLink"],[1,"row"],[1,"col","ion-padding"],[3,"routerLink"],["color","dark"],["name","arrow-back","slot","start"],[1,"col","text-align-right","ion-padding"],[3,"click"],[1,"text08"],["color","danger"]],template:function(t,e){1&t&&(b.Kb(0,"ion-content",0),b.Kb(1,"div",1),b.Kb(2,"div"),b.Ib(3,"ion-img",2),b.Jb(),b.Kb(4,"div",3),b.Kb(5,"ion-card",4),b.Kb(6,"form",5),b.Sb("keyup.enter",(function(){return!!e.onLoginForm.valid&&e.submit()})),b.Kb(7,"ion-item",6),b.Kb(8,"ion-label",7),b.Ib(9,"ion-icon",8),b.kc(10),b.Vb(11,"translate"),b.Jb(),b.Ib(12,"ion-input",9),b.Jb(),b.jc(13,h,4,3,"p",10),b.Kb(14,"ion-item",6),b.Kb(15,"ion-label",7),b.Ib(16,"ion-icon",11),b.kc(17),b.Vb(18,"translate"),b.Jb(),b.Ib(19,"ion-input",12),b.Jb(),b.Jb(),b.Kb(20,"ion-button",13),b.Sb("click",(function(){return e.submit()})),b.Ib(21,"ion-icon",14),b.kc(22),b.Vb(23,"translate"),b.Jb(),b.Kb(24,"ion-button",15),b.kc(25),b.Vb(26,"translate"),b.Jb(),b.Kb(27,"div",16),b.Kb(28,"div",17),b.Kb(29,"ion-text",18),b.Kb(30,"ion-text",19),b.Kb(31,"strong"),b.Ib(32,"ion-icon",20),b.kc(33),b.Vb(34,"translate"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Kb(35,"div",21),b.Kb(36,"ion-text",22),b.Sb("click",(function(){return e.openForgotPassAlert()})),b.Kb(37,"ion-text",19),b.Kb(38,"strong"),b.kc(39),b.Vb(40,"translate"),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb(),b.Jb()),2&t&&(b.xb(3),b.ac("src",e.logo),b.xb(3),b.ac("formGroup",e.onLoginForm),b.xb(4),b.mc(" \xa0",b.Wb(11,12,"app.label.email")," "),b.xb(3),b.ac("ngIf",e.onLoginForm.get("email").touched&&e.onLoginForm.get("email").hasError("required")),b.xb(4),b.mc(" \xa0",b.Wb(18,14,"app.label.password")," "),b.xb(3),b.ac("disabled",!e.onLoginForm.valid),b.xb(2),b.mc(" ",b.Wb(23,16,"app.pages.auth.login")," "),b.xb(2),b.ac("routerLink",b.cc(24,m)),b.xb(1),b.mc(" ",b.Wb(26,18,"app.pages.auth.createaccount")," "),b.xb(4),b.ac("routerLink",b.cc(25,f)),b.xb(4),b.mc(" ",b.Wb(34,20,"app.label.goback")," "),b.xb(6),b.mc(" ",b.Wb(40,22,"app.pages.auth.forgotpassword")," "))},directives:[r.o,r.t,r.i,a.m,a.i,a.c,r.x,r.y,r.s,r.w,r.ab,a.h,a.b,o.j,r.g,r.Y,i.g,r.O],pipes:[u.c],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--background:linear-gradient(135deg,var(--ion-color-medium),var(--ion-color-light))}.auth-page[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%], .auth-page[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding:0}.auth-page[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .button-ios[_ngcontent-%COMP%], .auth-page[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .button-md[_ngcontent-%COMP%]{border-radius:0}.auth-page[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .button-ios[_ngcontent-%COMP%]:first-of-type, .auth-page[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .button-md[_ngcontent-%COMP%]:first-of-type{border-radius:2px 0 0 2px}.auth-page[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .button-ios[_ngcontent-%COMP%]:last-of-type, .auth-page[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   .button-md[_ngcontent-%COMP%]:last-of-type{border-radius:0 2px 2px 0}.auth-page[_ngcontent-%COMP%]   .auth-content[_ngcontent-%COMP%]{margin:auto;max-width:720px}.auth-page[_ngcontent-%COMP%]   .auth-content[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:180px;margin:auto;display:block}"]}),t})()}];let C=(()=>{class t{}return t.\u0275mod=b.Fb({type:t}),t.\u0275inj=b.Eb({factory:function(e){return new(e||t)},imports:[[o.b,a.d,a.k,r.S,i.h.forChild(v),u.b.forChild()]]}),t})()}}]);